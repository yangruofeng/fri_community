<?php
/**
 * Created by PhpStorm.
 * User: sahara
 * Date: 2017/11/6
 * Time: 17:24
 */

class loan_productControl extends bank_apiControl
{


    /**
     * 取得贷款产品列表
     * @return result
     */
    public function getProductListOp()
    {
        $rt = $this->checkToken();
        if( !$rt->STS ){
            return $rt;
        }

        $param = array_merge(array(),$_GET,$_POST);

        $m = new loan_productModel();
        if( $param['pageNum'] && $param['pageSize'] ){
            $page = intval($param['pageNum']);
            $pageSize = intval($param['pageSize']);
            $list = $m->limit($page,$pageSize)->select(array(
                'state' => loanProductStateEnum::ACTIVE
            ));
        }else{
            $list = $m->select(array(
                'state' => loanProductStateEnum::ACTIVE
            ));
        }

        $list = (count($list)>=1)?$list:null;

        return new result(true,'',$list);

    }


}